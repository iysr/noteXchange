/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={403:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,s=new Promise((function(s,o){n(i=e[t].apply(e,r)).then(s,o)}));return s.request=i,s}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new u(e,i.request)}))}function s(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function o(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function a(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function c(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function l(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function d(e){this._store=e}function h(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new h(n)}function m(e){this._db=e}s(l,"_index",["name","keyPath","multiEntry","unique"]),o(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(u,"_cursor",["direction","key","primaryKey","value"]),o(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(u.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new u(e,t._request)}))}))})})),d.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},d.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},s(d,"_store",["name","keyPath","indexNames","autoIncrement"]),o(d,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(d,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(d,"_store",IDBObjectStore,["deleteIndex"]),h.prototype.objectStore=function(){return new d(this._tx.objectStore.apply(this._tx,arguments))},s(h,"_tx",["objectStoreNames","mode"]),a(h,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new d(this._db.createObjectStore.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),m.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},s(m,"_db",["name","version","objectStoreNames"]),a(m,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[d,l].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})}))})),[l,d].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),s=i.request;return s&&(s.onupgradeneeded=function(e){n&&n(new p(s.result,e.oldVersion,s.transaction))}),i.then((function(e){return new m(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";function e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function t(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function i(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create;const s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let d=(15&o)<<2|c>>6,h=63&c;a||(h=64,s||(d=64)),r.push(n[l],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}class l extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,l.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,u.prototype.create)}}class u{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(d,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new l(r,o,n)}}const d=/\{\$([^}]+)}/g;function h(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(p(n)&&p(s)){if(!h(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function p(e){return null!==e&&"object"==typeof e}function m(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function f(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function g(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class y{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function w(){}function I(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function _(e){return e&&e._delegate?e._delegate:e}var b=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),E="[DEFAULT]",k=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new o;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var n,i;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:E})}catch(e){}try{for(var s=t(this.instancesDeferred.entries()),o=s.next();!o.done;o=s.next()){var a=r(o.value,2),c=a[0],l=a[1],u=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:u});l.resolve(d)}catch(e){}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=E),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return e=this,t=void 0,s=function(){var e;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(i(i([],r(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),r(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}));var e,t,n,s},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=E),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=E),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var n,i;void 0===e&&(e={});var s=e.options,o=void 0===s?{}:s,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var l=t(this.instancesDeferred.entries()),u=l.next();!u.done;u=l.next()){var d=r(u.value,2),h=d[0],p=d[1];a===this.normalizeInstanceIdentifier(h)&&p.resolve(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return c},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,n){var r,i,s=this.onInitCallbacks.get(n);if(s)try{for(var o=t(s),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(e,n)}catch(e){}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===E?void 0:t),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(e){}return s||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=E),this.component?this.component.multipleInstances?e:E:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),T=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new k(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();const S=[];var R;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(R||(R={}));const C={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},O=R.INFO,A={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},N=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=A[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class P{constructor(e){this.name=e,this._logLevel=O,this._logHandler=N,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in R))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?C[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...e),this._logHandler(this,R.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...e),this._logHandler(this,R.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,R.INFO,...e),this._logHandler(this,R.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,R.WARN,...e),this._logHandler(this,R.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,R.ERROR,...e),this._logHandler(this,R.ERROR,...e)}}class M{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const L="@firebase/app",D="0.7.5",B=new P("@firebase/app"),x={[L]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},U=new Map,j=new Map;function $(e,t){try{e.container.addComponent(t)}catch(n){B.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function F(e){const t=e.name;if(j.has(t))return B.debug(`There were multiple attempts to register component ${t}.`),!1;j.set(t,e);for(const t of U.values())$(t,e);return!0}function H(e,t){return e.container.getProvider(t)}const V=new u("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class z{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new b("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw V.create("app-deleted",{appName:this._name})}}const W="9.2.0";function q(e="[DEFAULT]"){const t=U.get(e);if(!t)throw V.create("no-app",{appName:e});return t}function K(e,t,n){var r;let i=null!==(r=x[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void B.warn(e.join(" "))}F(new b(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}F(new b("platform-logger",(e=>new M(e)),"PRIVATE")),K(L,D,""),K(L,D,"esm2017"),K("fire-js",""),K("firebase","9.2.0","app");var G=n(403);const J="@firebase/installations",X="0.5.2",Y="w:0.5.2",Z=new u("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Q(e){return e instanceof l&&e.code.includes("request-failed")}function ee({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function te(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function ne(e,t){const n=(await t.json()).error;return Z.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function re({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function ie(e){const t=await e();return t.status>=500&&t.status<600?e():t}function se(e){return new Promise((t=>{setTimeout(t,e)}))}const oe=/^[cdef][\w-]{21}$/;function ae(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return oe.test(t)?t:""}catch(e){return""}}function ce(e){return`${e.appName}!${e.appId}`}const le=new Map;function ue(e,t){const n=ce(e);de(n,t),function(e,t){const n=(!he&&"BroadcastChannel"in self&&(he=new BroadcastChannel("[Firebase] FID Change"),he.onmessage=e=>{de(e.data.key,e.data.fid)}),he);n&&n.postMessage({key:e,fid:t}),0===le.size&&he&&(he.close(),he=null)}(n,t)}function de(e,t){const n=le.get(e);if(n)for(const e of n)e(t)}let he=null;const pe="firebase-installations-store";let me=null;function fe(){return me||(me=(0,G.openDb)("firebase-installations-database",1,(e=>{0===e.oldVersion&&e.createObjectStore(pe)}))),me}async function ge(e,t){const n=ce(e),r=(await fe()).transaction(pe,"readwrite"),i=r.objectStore(pe),s=await i.get(n);return await i.put(t,n),await r.complete,s&&s.fid===t.fid||ue(e,t.fid),t}async function ye(e){const t=ce(e),n=(await fe()).transaction(pe,"readwrite");await n.objectStore(pe).delete(t),await n.complete}async function ve(e,t){const n=ce(e),r=(await fe()).transaction(pe,"readwrite"),i=r.objectStore(pe),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.complete,!o||s&&s.fid===o.fid||ue(e,o.fid),o}async function we(e){let t;const n=await ve(e,(n=>{const r=function(e){return be(e||{fid:ae(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Z.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,{fid:t}){const n=ee(e),r=re(e),i={fid:t,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Y},s={method:"POST",headers:r,body:JSON.stringify(i)},o=await ie((()=>fetch(n,s)));if(o.ok){const e=await o.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:te(e.authToken)}}throw await ne("Create Installation",o)}(e,t);return ge(e,n)}catch(n){throw Q(n)&&409===n.customData.serverCode?await ye(e):await ge(e,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ie(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Ie(e){let t=await _e(e);for(;1===t.registrationStatus;)await se(100),t=await _e(e);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await we(e);return n||t}return t}function _e(e){return ve(e,(e=>{if(!e)throw Z.create("installation-not-found");return be(e)}))}function be(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Ee({appConfig:e,platformLoggerProvider:t},n){const r=function(e,{fid:t}){return`${ee(e)}/${t}/authTokens:generate`}(e,n),i=function(e,{refreshToken:t}){const n=re(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),s=t.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={installation:{sdkVersion:Y}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await ie((()=>fetch(r,a)));if(c.ok)return te(await c.json());throw await ne("Generate Auth Token",c)}async function ke(e,t=!1){let n;const r=await ve(e.appConfig,(r=>{if(!Se(r))throw Z.create("not-registered");const i=r.authToken;if(!t&&(2===(s=i).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(s)))return r;var s;if(1===i.requestStatus)return n=async function(e,t){let n=await Te(e.appConfig);for(;1===n.authToken.requestStatus;)await se(100),n=await Te(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ke(e,t):r}(e,t),r;{if(!navigator.onLine)throw Z.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await Ee(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await ge(e.appConfig,r),n}catch(n){if(!Q(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ge(e.appConfig,n)}else await ye(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Te(e){return ve(e,(e=>{if(!Se(e))throw Z.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function Se(e){return void 0!==e&&2===e.registrationStatus}function Re(e){return Z.create("missing-app-config-values",{valueName:e})}const Ce="installations";F(new b(Ce,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Re("App Configuration");if(!e.name)throw Re("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Re(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,platformLoggerProvider:H(t,"platform-logger"),_delete:()=>Promise.resolve()}}),"PUBLIC")),F(new b("installations-internal",(e=>{const t=H(e.getProvider("app").getImmediate(),Ce).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await we(t.appConfig);return r?r.catch(console.error):ke(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await we(e);t&&await t}(n.appConfig),(await ke(n,t)).token}(t,e)}}),"PRIVATE")),K(J,X),K(J,X,"esm2017");const Oe="analytics",Ae="https://www.googletagmanager.com/gtag/js",Ne=new P("@firebase/analytics");function Pe(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const Me=new u("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Le=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function De(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Be(e,t=Le,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Me.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Me.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ue;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),xe({appId:r,apiKey:i,measurementId:s},o,a,t)}async function xe(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Le){const{appId:s,measurementId:o}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(Me.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(o)return Ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e.message}]`),{appId:s,measurementId:o};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:De(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Me.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(s),t}catch(t){if(!function(e){if(!(e instanceof l&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(i.deleteThrottleMetadata(s),o)return Ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${t.message}]`),{appId:s,measurementId:o};throw t}const a=503===Number(t.customData.httpStatus)?I(n,i.intervalMillis,30):I(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+a,backoffCount:n+1};return i.setThrottleMetadata(s,c),Ne.debug(`Calling attemptFetch again in ${a} millis`),xe(e,c,r,i)}}class Ue{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}async function je(e,t,n,r,i,s,o){var a;const c=Be(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ne.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Ne.error(e))),t.push(c);const l=async function(){if("object"!=typeof indexedDB)return Ne.warn(Me.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}catch(e){return Ne.warn(Me.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ae))return t;return null})()||function(e,t){const n=document.createElement("script");n.src=`${Ae}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(s,u.measurementId),i("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),u.measurementId}class $e{constructor(e){this.app=e}_delete(){return delete Fe[this.app.options.appId],Promise.resolve()}}let Fe={},He=[];const Ve={};let ze,We,qe="dataLayer",Ke=!1;function Ge(e,t,n){!function(){const e=[];if(c()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Me.create("invalid-analytics-context",{errorInfo:t});Ne.warn(n.message)}}();const r=e.options.appId;if(!r)throw Me.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Me.create("no-api-key");Ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Fe[r])throw Me.create("already-exists",{id:r});if(!Ke){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(s=window.gtag),window.gtag=function(e,t,n,r){return async function(i,s,o){try{"event"===i?await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Pe(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(e){Ne.error(e)}}(e,t,n,s,o):"config"===i?await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await Pe(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(e){Ne.error(e)}e("config",i,s)}(e,t,n,r,s,o):e("set",s)}catch(e){Ne.error(e)}}}(s,e,t,n),{gtagCore:s,wrappedGtag:window.gtag}}(Fe,He,Ve);We=e,ze=t,Ke=!0}return Fe[r]=je(e,He,Ve,t,ze,qe,n),new $e(e)}const Je="@firebase/analytics",Xe="0.7.2";var Ye;F(new b(Oe,((e,{options:t})=>Ge(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),F(new b("analytics-internal",(function(e){try{const t=e.getProvider(Oe).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=_(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(We,Fe[e.app.options.appId],t,n,r).catch((e=>Ne.error(e)))}(t,e,n,r)}}catch(e){throw Me.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),K(Je,Xe),K(Je,Xe,"esm2017"),function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ye||(Ye={}));const Ze="firebasestorage.googleapis.com";class Qe extends l{constructor(e,t){super(et(e),`Firebase Storage: ${t} (${et(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}_codeEquals(e){return et(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}function et(e){return"storage/"+e}function tt(){return new Qe("unknown","An unknown error occurred, please check the error payload for server response.")}function nt(e){return new Qe("invalid-argument",e)}function rt(){return new Qe("app-deleted","The Firebase app was deleted.")}function it(e,t){return new Qe("invalid-format","String does not match format '"+e+"': "+t)}function st(e){throw new Qe("internal-error","Internal error: "+e)}class ot{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ye.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Ye.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Ye.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw st("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const e in r)r.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,r[e].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw st("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw st("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponseText(){if(!this.sent_)throw st("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class at{createConnection(){return new ot}}class ct{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ct.makeFromUrl(e,t)}catch(t){return new ct(e,"")}if(""===n.path)return n;throw new Qe("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Ze?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const r=a[t],i=r.regex.exec(e);if(i){const e=i[r.indices.bucket];let t=i[r.indices.path];t||(t=""),n=new ct(e,t),r.postModify(n);break}}if(null==n)throw function(e){return new Qe("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class lt{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ut(e){return"string"==typeof e||e instanceof String}function dt(e){return ht()&&e instanceof Blob}function ht(){return"undefined"!=typeof Blob}function pt(e,t,n,r){if(r<t)throw nt(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw nt(`Invalid value for '${e}'. Expected ${n} or less.`)}function mt(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function ft(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}class gt{constructor(e,t,n,r,i,s,o,a,c,l,u){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.pool_=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponseText());void 0!==e?n(e):n()}catch(e){r(e)}else if(null!==i){const e=tt();e.serverResponse=i.getResponseText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else t.canceled?r(this.appDelete_?rt():new Qe("canceled","User canceled the upload/download.")):r(new Qe("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new yt(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=!1,o=0;function a(){return 2===o}let c=!1;function l(...e){c||(c=!0,t.apply(null,e))}function u(t){i=setTimeout((()=>{i=null,e(d,a())}),t)}function d(e,...t){if(c)return;if(e)return void l.call(null,e,...t);if(a()||s)return void l.call(null,e,...t);let n;r<64&&(r*=2),1===o?(o=2,n=0):n=1e3*(r+Math.random()),u(n)}let h=!1;function p(e){h||(h=!0,c||(null!==i?(e||(o=2),clearTimeout(i),u(0)):e||(o=1)))}return u(0),setTimeout((()=>{s=!0,p(!0)}),n),p}(((e,t)=>{if(t)return void e(!1,new yt(!1,null,!0));const n=this.pool_.createConnection();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ye.NO_ERROR,i=n.getStatus();if(!t||this.isRetryStatusCode_(i)){const t=n.getErrorCode()===Ye.ABORT;return void e(!1,new yt(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new yt(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}class yt{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function vt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function wt(...e){const t=vt();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(ht())return new Blob(e);throw new Qe("unsupported-environment","This browser doesn't seem to support creating Blobs")}const It="base64",_t="base64url",bt="data_url";class Et{constructor(e,t){this.data=e,this.contentType=t||null}}function kt(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Tt(e,t){switch(e){case It:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw it(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case _t:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r)throw it(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(t)}catch(t){throw it(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return r}class St{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw it(bt,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;var r,i;null!=n&&(this.base64=(i=";base64",(r=n).length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class Rt{constructor(e,t){let n=0,r="";dt(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(dt(this.data_)){const s=(n=this.data_,r=e,i=t,n.webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null);return null===s?null:new Rt(s)}var n,r,i;{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Rt(n,!0)}}static getBlob(...e){if(ht()){const t=e.map((e=>e instanceof Rt?e.data_:e));return new Rt(wt.apply(null,t))}{const t=e.map((e=>ut(e)?function(e,t){switch(e){case"raw":return new Et(kt(t));case It:case _t:return new Et(Tt(e,t));case bt:return new Et(function(e){const t=new St(e);return t.base64?Tt(It,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(e){throw it(bt,"Malformed data URL.")}return kt(t)}(t.rest)}(t),new St(t).contentType)}throw tt()}("raw",e).data:e.data_));let n=0;t.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return t.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Rt(r,!0)}}uploadData(){return this.data_}}function Ct(e){let t;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function Ot(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function At(e,t){return t}class Nt{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||At}}let Pt=null;function Mt(){if(Pt)return Pt;const e=[];e.push(new Nt("bucket")),e.push(new Nt("generation")),e.push(new Nt("metageneration")),e.push(new Nt("name","fullPath",!0));const t=new Nt("name");t.xform=function(e,t){return function(e){return!ut(e)||e.length<2?e:Ot(e)}(t)},e.push(t);const n=new Nt("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Nt("timeCreated")),e.push(new Nt("updated")),e.push(new Nt("md5Hash",null,!0)),e.push(new Nt("cacheControl",null,!0)),e.push(new Nt("contentDisposition",null,!0)),e.push(new Nt("contentEncoding",null,!0)),e.push(new Nt("contentLanguage",null,!0)),e.push(new Nt("contentType",null,!0)),e.push(new Nt("metadata","customMetadata",!0)),Pt=e,Pt}function Lt(e,t,n){const r=Ct(t);return null===r?null:function(e,t,n){const r={type:"file"},i=n.length;for(let e=0;e<i;e++){const i=n[e];r[i.local]=i.xform(r,t[i.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new ct(n,r);return t._makeStorageReference(i)}})}(r,e),r}(e,r,n)}class Dt{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bt(e){if(!e)throw tt()}function xt(e,t){return function(n,r){const i=Lt(e,r,t);return Bt(null!==i),i}}function Ut(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new Qe("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Qe("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Qe("quota-exceeded","Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Qe("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function jt(e){const t=Ut(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Qe("object-not-found","Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function $t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=mt(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new Dt(o,"GET",function(e,t){return function(n,r){const i=function(e,t,n){const r=Ct(n);return null===r?null:function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(const i of n.prefixes){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new ct(t,n));r.prefixes.push(s)}if(n.items)for(const i of n.items){const n=e._makeStorageReference(new ct(t,i.name));r.items.push(n)}return r}(e,t,r)}(e,t,r);return Bt(null!==i),i}}(e,t.bucket),a);return c.urlParams=s,c.errorHandler=Ut(t),c}function Ft(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=function(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+function(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Rt.getBlob(l,r,u);if(null===d)throw new Qe("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.");const h={name:c.fullPath},p=mt(s,e.host,e._protocol),m=e.maxUploadRetryTime,f=new Dt(p,"POST",xt(e,n),m);return f.urlParams=h,f.headers=o,f.body=d.uploadData(),f.errorHandler=Ut(t),f}class Ht{constructor(e,t){this._service=e,this._location=t instanceof ct?t:ct.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ht(e,t)}get root(){const e=new ct(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ot(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ct(this._location.bucket,e);return new Ht(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Qe("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Vt(e){const t={prefixes:[],items:[]};return zt(e,t).then((()=>t))}async function zt(e,t,n){const r={pageToken:n},i=await async function(e,t){null!=t&&"number"==typeof t.maxResults&&pt("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=$t(e.storage,e._location,"/",n.pageToken,n.maxResults);return(await e.storage.makeRequestWithTokens(r)).getPromise()}(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await zt(e,t,i.nextPageToken)}async function Wt(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=mt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Dt(r,"GET",function(e,t){return function(n,r){const i=Lt(e,r,t);return Bt(null!==i),function(e,t,n,r){const i=Ct(t);if(null===i)return null;if(!ut(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return mt("/b/"+o(i)+"/o/"+o(s),n,r)+ft({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}(e,n),i);return s.errorHandler=jt(t),s}(e.storage,e._location,Mt());return(await e.storage.makeRequestWithTokens(t)).getPromise().then((e=>{if(null===e)throw new Qe("no-download-url","The given file does not have any download URLs.");return e}))}function qt(e,t){if(e instanceof Gt){const n=e;if(null==n._bucket)throw new Qe("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new Ht(n,n._bucket);return null!=t?qt(r,t):r}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ct(e._location.bucket,n);return new Ht(e.storage,r)}(e,t):e}function Kt(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:ct.makeFromBucketSpec(n,e)}class Gt{constructor(e,t,n,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Ze,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ct.makeFromBucketSpec(i,this._host):Kt(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ct.makeFromBucketSpec(this._url,e):this._bucket=Kt(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pt("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pt("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ht(this,e)}_makeRequest(e,t,n){if(this._deleted)return new lt(rt());{const r=function(e,t,n,r,i,s){const o=ft(e.urlParams),a=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new gt(a,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((()=>this._requests.delete(r)),(()=>this._requests.delete(r))),r}}async makeRequestWithTokens(e){const[t,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n)}}const Jt="@firebase/storage",Xt="0.8.4",Yt="storage";function Zt(e){return async function(e){e._throwIfRoot("getMetadata");const t=function(e,t,n){const r=mt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Dt(r,"GET",xt(e,n),i);return s.errorHandler=jt(t),s}(e.storage,e._location,Mt());return(await e.storage.makeRequestWithTokens(t)).getPromise()}(e=_(e))}function Qt(e){return Vt(e=_(e))}function en(e){return Wt(e=_(e))}function tn(e,t){return function(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Gt)return new Ht(e,t);throw nt("To use ref(service, url), the first argument must be a Storage instance.")}return qt(e,t)}(e=_(e),t)}F(new b(Yt,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Gt(n,r,i,new at,t,W)}),"PUBLIC").setMultipleInstances(!0)),K(Jt,Xt,""),K(Jt,Xt,"esm2017");const nn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rn=new u("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),sn=new P("@firebase/auth");function on(e,...t){sn.logLevel<=R.ERROR&&sn.error(`Auth (9.2.0): ${e}`,...t)}function an(e,...t){throw un(e,...t)}function cn(e,...t){return un(e,...t)}function ln(e,t,n){const r=Object.assign(Object.assign({},nn()),{[t]:n});return new u("auth","Firebase",r).create(t,{appName:e.name})}function un(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return rn.create(e,...t)}function dn(e,t,...n){if(!e)throw un(t,...n)}function hn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw on(t),new Error(t)}function pn(e,t){e||hn(t)}const mn=new Map;function fn(e){pn(e instanceof Function,"Expected a class definition");let t=mn.get(e);return t?(pn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mn.set(e,t),t)}function gn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class vn{constructor(e,t){this.shortDelay=e,this.longDelay=t,pn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===yn()||"https:"===yn()||c()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function wn(e,t){pn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class In{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _n={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},bn=new vn(3e4,6e4);function En(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function kn(e,t,n,r,i={}){return Tn(e,i,(()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=m(Object.assign({key:e.config.apiKey},s)).slice(1),a=new(In.headers());return a.set("Content-Type","application/json"),a.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&a.set("X-Firebase-Locale",e.languageCode),In.fetch()(Rn(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Tn(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},_n),t);try{const t=new Cn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw On(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw On(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw On(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ln(e,a,o);an(e,a)}}catch(t){if(t instanceof l)throw t;an(e,"network-request-failed")}}async function Sn(e,t,n,r,i={}){const s=await kn(e,t,n,r,i);return"mfaPendingCredential"in s&&an(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Rn(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?wn(e.config,i):`${e.config.apiScheme}://${i}`}class Cn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(cn(this.auth,"timeout"))),bn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function On(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cn(e,t,r);return i.customData._tokenResponse=n,i}function An(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Nn(e){return 1e3*Number(e)}function Pn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return on("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return e?JSON.parse(e):(on("Failed to decode base64 JWT payload"),null)}catch(e){return on("Caught error parsing JWT payload as JSON",e),null}}async function Mn(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof l&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Ln{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class Dn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=An(this.lastLoginAt),this.creationTime=An(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bn(t){var n;const r=t.auth,i=await t.getIdToken(),s=await Mn(t,async function(e,t){return kn(e,"POST","/v1/accounts:lookup",t)}(r,{idToken:i}));dn(null==s?void 0:s.users.length,r,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const a=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((t=>{var{providerId:n}=t,r=e(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})):[],c=(l=t.providerData,u=a,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const d=t.isAnonymous,h=!(t.email&&o.passwordHash||(null==c?void 0:c.length)),p=!!d&&h,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Dn(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,m)}class xn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dn(e.idToken,"internal-error"),dn(void 0!==e.idToken,"internal-error"),dn(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Pn(e);return dn(t,"internal-error"),dn(void 0!==t.exp,"internal-error"),dn(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return dn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Tn(e,{},(()=>{const n=m({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Rn(e,r,"/v1/token",`key=${i}`);return In.fetch()(s,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new xn;return n&&(dn("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(dn("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(dn("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xn,this.toJSON())}_performRefresh(){return hn("not implemented")}}function Un(e,t){dn("string"==typeof e||void 0===e,"internal-error",{appName:t})}class jn{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=e(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.metadata=new Dn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Mn(this,this.stsTokenManager.getToken(this.auth,e));return dn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=_(e),r=await n.getIdToken(t),i=Pn(r);dn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:An(Nn(i.auth_time)),issuedAtTime:An(Nn(i.iat)),expirationTime:An(Nn(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=_(e);await Bn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(dn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){dn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Bn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Mn(this,async function(e,t){return kn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,f=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:I,providerData:_,stsTokenManager:b}=t;dn(v&&b,e,"internal-error");const E=xn.fromJSON(this.name,b);dn("string"==typeof v,e,"internal-error"),Un(u,e.name),Un(d,e.name),dn("boolean"==typeof w,e,"internal-error"),dn("boolean"==typeof I,e,"internal-error"),Un(h,e.name),Un(p,e.name),Un(m,e.name),Un(f,e.name),Un(g,e.name),Un(y,e.name);const k=new jn({uid:v,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:I,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),f&&(k._redirectEventId=f),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new xn;r.updateFromServerResponse(t);const i=new jn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Bn(i),i}}class $n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$n.type="NONE";const Fn=$n;function Hn(e,t,n){return`firebase:${e}:${t}:${n}`}class Vn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Hn(this.userKey,r.apiKey,i),this.fullPersistenceKey=Hn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Vn(fn(Fn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||fn(Fn);const s=Hn(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=jn._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new Vn(i,e,n)):new Vn(i,e,n)}}function zn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Gn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xn(t))return"Blackberry";if(Yn(t))return"Webos";if(qn(t))return"Safari";if((t.includes("chrome/")||Kn(t))&&!t.includes("edge/"))return"Chrome";if(Jn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Wn(e=a()){return/firefox\//i.test(e)}function qn(e=a()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Kn(e=a()){return/crios\//i.test(e)}function Gn(e=a()){return/iemobile/i.test(e)}function Jn(e=a()){return/android/i.test(e)}function Xn(e=a()){return/blackberry/i.test(e)}function Yn(e=a()){return/webos/i.test(e)}function Zn(e=a()){return/iphone|ipad|ipod/i.test(e)}function Qn(e=a()){return Zn(e)||Jn(e)||Yn(e)||Xn(e)||/windows phone/i.test(e)||Gn(e)}function er(e,t=[]){let n;switch(e){case"Browser":n=zn(a());break;case"Worker":n=`${zn(a())}-${e}`;break;default:n=e}return`${n}/JsCore/9.2.0/${t.length?t.join(","):"FirebaseCore-web"}`}class tr{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rr(this),this.idTokenSubscription=new rr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fn(t)),this._initializationPromise=this.queue((async()=>{var n;this._deleted||(this.persistenceManager=await Vn.create(this,e),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(t),this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(dn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bn(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?_(e):null;return t&&dn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&dn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(fn(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new u("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fn(e)||this._popupRedirectResolver;dn(t,this,"argument-error"),this.redirectPersistenceManager=await Vn.create(this,[fn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return dn(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=er(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function nr(e){return _(e)}class rr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new y(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return dn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class ir{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hn("not implemented")}_getIdTokenResponse(e){return hn("not implemented")}_linkToIdToken(e,t){return hn("not implemented")}_getReauthenticationResolver(e){return hn("not implemented")}}async function sr(e,t){return kn(e,"POST","/v1/accounts:update",t)}class or extends ir{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new or(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new or(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithPassword",En(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithEmailLink",En(e,t))}(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return sr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithEmailLink",En(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ar(e,t){return Sn(e,"POST","/v1/accounts:signInWithIdp",En(e,t))}class cr extends ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):an("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n="string"==typeof t?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=e(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new cr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return ar(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ar(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ar(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=m(t)}return e}}const lr={USER_NOT_FOUND:"user-not-found"};class ur extends ir{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ur({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ur({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithPhoneNumber",En(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Sn(e,"POST","/v1/accounts:signInWithPhoneNumber",En(e,t));if(n.temporaryProof)throw On(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Sn(e,"POST","/v1/accounts:signInWithPhoneNumber",En(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),lr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ur({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class dr{constructor(e){var t,n,r,i,s,o;const a=f(g(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);dn(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=f(g(e)).link,n=t?f(g(t)).deep_link_id:null,r=f(g(e)).deep_link_id;return(r?f(g(r)).link:null)||r||n||t||e}(e);try{return new dr(t)}catch(e){return null}}}class hr{constructor(){this.providerId=hr.PROVIDER_ID}static credential(e,t){return or._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=dr.parseLink(t);return dn(n,"argument-error"),or._fromEmailAndCode(e,n.code,n.tenantId)}}hr.PROVIDER_ID="password",hr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",hr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class pr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class mr extends pr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fr extends mr{constructor(){super("facebook.com")}static credential(e){return cr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch(e){return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com",fr.PROVIDER_ID="facebook.com";class gr extends mr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return cr._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return gr.credential(t,n)}catch(e){return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com",gr.PROVIDER_ID="google.com";class yr extends mr{constructor(){super("github.com")}static credential(e){return cr._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch(e){return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com",yr.PROVIDER_ID="github.com";class vr extends mr{constructor(){super("twitter.com")}static credential(e,t){return cr._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return vr.credential(t,n)}catch(e){return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com",vr.PROVIDER_ID="twitter.com";class wr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await jn._fromIdTokenResponse(e,n,r),s=Ir(n);return new wr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ir(n);return new wr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ir(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class _r extends l{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,_r.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new _r(e,t,n,r)}}function br(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw _r._fromErrorAndOperation(e,n,t,r);throw n}))}async function Er(e,t,n=!1){const r="signIn",i=await br(e,r,t),s=await wr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function kr(e,t,n){const r=_(e),i={requestType:"PASSWORD_RESET",email:t};n&&function(e,t,n){var r;dn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),dn(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(dn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(dn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}(r,i,n),await async function(e,t){return async function(e,t){return kn(e,"POST","/v1/accounts:sendOobCode",En(e,t))}(e,t)}(r,i)}new WeakMap;const Tr="__sak";class Sr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tr,"1"),this.storage.removeItem(Tr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Rr extends Sr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=a();return qn(e)||Zn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Qn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=a();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rr.type="LOCAL";const Cr=Rr;class Or extends Sr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Or.type="SESSION";const Ar=Or;class Nr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Nr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pr(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Nr.receivers=[];class Mr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Pr("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Lr(){return window}function Dr(){return void 0!==Lr().WorkerGlobalScope&&"function"==typeof Lr().importScripts}const Br="firebaseLocalStorageDb",xr="firebaseLocalStorage",Ur="fbase_key";class jr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function $r(e,t){return e.transaction([xr],t?"readwrite":"readonly").objectStore(xr)}function Fr(){const e=indexedDB.open(Br,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(xr,{keyPath:Ur})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(xr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Br);return new jr(e).toPromise()}(),t(await Fr()))}))}))}async function Hr(e,t,n){const r=$r(e,!0).put({[Ur]:t,value:n});return new jr(r).toPromise()}function Vr(e,t){const n=$r(e,!0).delete(t);return new jr(n).toPromise()}class zr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Fr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nr._getInstance(Dr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Mr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fr();return await Hr(e,Tr,"1"),await Vr(e,Tr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Hr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=$r(e,!1).get(t),r=await new jr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Vr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=$r(e,!1).getAll();return new jr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zr.type="LOCAL";const Wr=zr;function qr(e){return`__${e}${Math.floor(1e6*Math.random())}`}qr("rcb"),new vn(3e4,6e4);class Kr{constructor(e){this.providerId=Kr.PROVIDER_ID,this.auth=nr(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let s;if(dn("string"==typeof i,e,"argument-error"),dn("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){dn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return kn(e,"POST","/v2/accounts/mfaEnrollment:start",En(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{dn("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;dn(n,e,"missing-multi-factor-info");const o=await function(e,t){return kn(e,"POST","/v2/accounts/mfaSignIn:start",En(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return kn(e,"POST","/v1/accounts:sendVerificationCode",En(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,_(t))}static credential(e,t){return ur._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Kr.credentialFromTaggedObject(t)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ur._fromTokenResponse(t,n):null}}function Gr(e,t){return t?fn(t):(dn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Kr.PROVIDER_ID="phone",Kr.PHONE_SIGN_IN_METHOD="phone";class Jr extends ir{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ar(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ar(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ar(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xr(e){return Er(e.auth,new Jr(e),e.bypassAuthState)}function Yr(e){const{auth:t,user:n}=e;return dn(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await Mn(e,br(r,i,t,e),n);dn(s.idToken,r,"internal-error");const o=Pn(s.idToken);dn(o,r,"internal-error");const{sub:a}=o;return dn(e.uid===a,r,"user-mismatch"),wr._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&an(r,"user-mismatch"),e}}(n,new Jr(e),e.bypassAuthState)}async function Zr(e){const{auth:t,user:n}=e;return dn(n,t,"internal-error"),async function(e,t,n=!1){const r=await Mn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wr._forOperation(e,"link",r)}(n,new Jr(e),e.bypassAuthState)}class Qr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xr;case"linkViaPopup":case"linkViaRedirect":return Zr;case"reauthViaPopup":case"reauthViaRedirect":return Yr;default:an(this.auth,"internal-error")}}resolve(e){pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ei=new vn(2e3,1e4);async function ti(e,t,n){const r=nr(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&an(e,"argument-error"),ln(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,pr);const i=Gr(r,n);return new ni(r,"signInViaPopup",t,i).executeNotNull()}class ni extends Qr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ni.currentPopupAction&&ni.currentPopupAction.cancel(),ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dn(e,this.auth,"internal-error"),e}async onExecution(){pn(1===this.filter.length,"Popup operations only handle one event");const e=Pr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(cn(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,ei.get())};e()}}ni.currentPopupAction=null;const ri=new Map;class ii extends Qr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=ri.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Hn("pendingRedirect",e.config.apiKey,e.name)}(t),r=function(e){return fn(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}ri.set(this.auth._key(),e)}return this.bypassAuthState||ri.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function si(e,t,n=!1){const r=nr(e),i=Gr(r,t),s=new ii(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class oi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ci(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ci(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(cn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ai(e))}saveEventToCache(e){this.cachedEventUids.add(ai(e)),this.lastProcessedEventTime=Date.now()}}function ai(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ci({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const li=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ui=/^https?/;function di(e){const t=gn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ui.test(n))return!1;if(li.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hi=new vn(3e4,6e4);function pi(){const e=Lr().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let mi=null;function fi(e){return mi=mi||function(e){return new Promise(((t,n)=>{var r,i,s,o;function a(){pi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pi(),n(cn(e,"network-request-failed"))},timeout:hi.get()})}if(null===(i=null===(r=Lr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Lr().gapi)||void 0===s?void 0:s.load)){const t=qr("iframefcb");return Lr()[t]=()=>{gapi.load?a():n(cn(e,"network-request-failed"))},o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");var r,i;n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=cn("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(n)}))}a()}})).catch((e=>{throw mi=null,e}))}(e),mi}const gi=new vn(5e3,15e3),yi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true"},vi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wi(e){const t=e.config;dn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?wn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:W},i=vi.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${m(r).slice(1)}`}const Ii={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _i{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function bi(e,t,n,r,i,s){dn(e.config.authDomain,e,"auth-domain-config-required"),dn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:W,eventId:i};if(t instanceof pr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof mr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?wn(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${m(a).slice(1)}`}const Ei="webStorageSupport",ki=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ar,this._completeRedirectFn=si}async _openPopup(e,t,n,r){var i;return pn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Ii),{width:r.toString(),height:i.toString(),top:s,left:o}),u=a().toLowerCase();n&&(c=Kn(u)?"_blank":n),Wn(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=a()){var t;return Zn(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new _i(null);const h=window.open(t||"",c,d);dn(h,e,"popup-blocked");try{h.focus()}catch(e){}return new _i(h)}(e,bi(e,t,n,gn(),r),Pr())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=bi(e,t,n,gn(),r),Lr().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(pn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}async initAndGetManager(e){const t=await async function(e){const t=await fi(e),n=Lr().gapi;return dn(n,e,"internal-error"),t.open({where:document.body,url:wi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yi,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=cn(e,"network-request-failed"),s=Lr().setTimeout((()=>{r(i)}),gi.get());function o(){Lr().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new oi(e);return t.register("authEvent",(t=>(dn(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ei,{type:Ei},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),an(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return kn(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(di(e))return}catch(e){}an(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qn()||qn()||Zn()}};var Ti,Si="@firebase/auth",Ri="0.19.0";class Ci{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){dn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Ti="Browser",F(new b("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{dn(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),dn(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:Ti,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:er(Ti)},s=new tr(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fn);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),F(new b("auth-internal",(e=>(e=>new Ci(e))(nr(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),K(Si,Ri,void 0),K(Si,Ri,"esm2017"),function(e=q()){const t=H(e=_(e),Oe);t.isInitialized()?t.getImmediate():function(e,t={}){const n=H(e,Oe);if(n.isInitialized()){const e=n.getImmediate();if(h(t,n.getOptions()))return e;throw Me.create("already-initialized")}n.initialize({options:t})}(e)}(function(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw V.create("bad-app-name",{appName:String(r)});const i=U.get(r);if(i){if(h(e,i.options)&&h(n,i.config))return i;throw V.create("duplicate-app",{appName:r})}const s=new T(r);for(const e of j.values())s.addComponent(e);const o=new z(e,n,s);return U.set(r,o),o}({apiKey:"AIzaSyAclJslufvhi2_ifkfFflRRLCyZAbULymg",authDomain:"notexchange-537d7.firebaseapp.com",projectId:"notexchange-537d7",storageBucket:"notexchange-537d7.appspot.com",messagingSenderId:"624878655853",appId:"1:624878655853:web:be486f5771cd9de57ea264",measurementId:"G-3V5Q5L5BF1"}));const Oi=function(e=q()){const t=H(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=H(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(h(n.getOptions(),null!=t?t:{}))return e;an(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ki,persistence:[Wr,Cr,Ar]})}();let Ai,Ni=!0;const Pi=(e,t)=>{(async function(e,t,n){const r=nr(e),i=await async function(e,t){return Sn(e,"POST","/v1/accounts:signUp",En(e,t))}(r,{returnSecureToken:!0,email:t,password:n}),s=await wr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s})(Oi,e,t).then((e=>{isloggedin=!0,Ai=e.user,console.log("signed up")})).catch((e=>{isloggedin=!1;const t=e.code;e.message,document.getElementById("errorcodeauth").innerHTML="auth/invalid-email"==t?"Invalid Email Address":"auth/internal-error"==t?"Wrong Email Address or Password":t}))},Mi=(e,t)=>{(function(e,t,n){return async function(e,t){return Er(nr(e),t)}(_(e),hr.credential(t,n))})(Oi,e,t).then((e=>{isloggedin=!0,Ai=e.user,console.log("signed in")})).catch((e=>{isloggedin=!1;const t=e.code;e.message,document.getElementById("errorcodeauth").innerHTML="auth/invalid-email"==t?"Invalid Email Address":"auth/internal-error"==t?"Wrong Email Address or Password":"auth/wrong-password"==t?"Wrong Password":t}))};let Li;const Di=e=>{(function(e,t){return async function(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Mn(e,sr(r,i));await e._updateTokensIfNecessary(s,!0)}(_(e),null,t)})(Oi.currentUser,e).then((()=>{})).catch((e=>{}))},Bi=function(e=q(),t){return H(e=_(e),Yt).getImmediate({identifier:t})}();let xi=!1;const Ui=(e,t,n,r,i)=>{xi=!1;let s=new Date,o="";o+=s.getFullYear(),o+=s.getMonth()+1,o+=s.getDate(),o+=s.getHours(),o+=s.getMinutes(),o+=s.getSeconds(),o+=s.getMilliseconds(),"docx"==e.name.substring(e.name.length-4)?o+=e.name.substring(e.name.length-5):o+=e.name.substring(e.name.length-4),function(e,t,n){return function(e,t,n){e._throwIfRoot("uploadBytes");const r=Ft(e.storage,e._location,Mt(),new Rt(t,!0),n);return e.storage.makeRequestWithTokens(r).then((e=>e.getPromise())).then((t=>({metadata:t,ref:e})))}(e=_(e),t,n)}(tn(Bi,"notes/"+o),e,{customMetadata:{subject:t,level:n,userName:r,userID:i,filename:e.name}}).then((e=>{xi=!0,Vi()}))};let ji,$i=!1;const Fi=(e,t)=>{$i=!1;let n=Hi[parseInt(e)].ref._location.path_;(function(e){return async function(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=mt(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Dt(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=jt(t),i}(e.storage,e._location);return(await e.storage.makeRequestWithTokens(t)).getPromise()}(e=_(e))})(tn(Bi,n)).then((()=>{$i=!0,ji=t,Vi()})).catch((e=>{}))};let Hi;const Vi=()=>{Qt(tn(Bi,"notes")).then((e=>{e.items.forEach((e=>{if("notes/undefined"!=e._location.path_){let t=!0;if(Hi.forEach((n=>{n.ref._location.path_==e._location.path_&&(t=!1)})),t){let t={ref:e,metas:"",url:""},n=tn(Bi,e._location.path_);Zt(n).then((e=>{t.metas=e})).catch((e=>{console.log("meta error")})),en(n).then((e=>{t.url=e})).catch((e=>{console.log(e.code)})),Hi.push(t)}}})),Hi.forEach(((t,n)=>{let r=!1;e.items.forEach((e=>{t.ref._location.path_==e._location.path_&&(r=!0)})),0==r&&Hi.splice(n,1)}))})).catch((e=>{console.log(e)}))};let zi="a",Wi=!1;document.addEventListener("click",(e=>{var t;"su"==e.target.id?(Pi(document.getElementsByClassName("email")[0].value,document.getElementsByClassName("password")[0].value),qi()):"li"==e.target.id?(Mi(document.getElementsByClassName("email")[0].value,document.getElementsByClassName("password")[0].value),qi()):"google"==e.target.id?(Li=new gr,ti(Oi,Li).then((e=>{gr.credentialFromResult(e).accessToken,Ai=e.user,isloggedin=!0,Ni=!1})).catch((e=>{if(isloggedin=!1,e.code,e.message,gr.credentialFromError(e),"auth/account-exists-with-different-credential"===e.code){var t=e.credential,n=e.email;Oi.fetchSignInMethodsForEmail(n).then((function(e){if("password"!==e[0]){var r=getProviderForProviderId(e[0]);Oi.signInWithPopup(r).then((function(e){e.user.linkAndRetrieveDataWithCredential(t).then((function(e){goToApp()}))}))}else{var i=promptUserForPassword();Oi.signInWithEmailAndPassword(n,i).then((function(e){return e.user.linkWithCredential(t)})).then((function(){goToApp()}))}}))}})),qi()):"facebook"==e.target.id?(Li=new fr,ti(Oi,Li).then((e=>{Ai=e.user,fr.credentialFromResult(e).accessToken,Ni=!1})).catch((e=>{e.code,e.message,e.email,fr.credentialFromError(e)})),qi()):"passwordreset"==e.target.id?Xi("passwordreset"):"close"==e.target.id?Yi():"pwrt"==e.target.id?(t=document.getElementsByClassName("email")[1].value,kr(Oi,t).then((()=>{isloggedin=!1})).catch((e=>{const t=e.code;e.message,document.getElementById("errorcodeauth").innerHTML="auth/invalid-email"==t?"Invalid Email Address":"auth/missing-email"==t?"Email Address Cannot be Left Blank":t})),Yi()):"cpw"==e.target.id?document.getElementById("pw1").value!=document.getElementById("pw2").value?document.getElementById("errorcodecpw").innerHTML="The passwords do not match.":document.getElementById("pw2").value.length<6?document.getElementById("errorcodecpw").innerHTML="Password has to be at least 6 characters long.":(Di(document.getElementById("pw2").value),Yi()):"nup"==e.target.id?document.getElementById("notesupload").files[0]?document.getElementById("upsubject").value?document.getElementById("uplevel").value?"docx"!=document.getElementById("notesupload").files[0].name.substring(document.getElementById("notesupload").files[0].name.length-4)&&".doc"!=document.getElementById("notesupload").files[0].name.substring(document.getElementById("notesupload").files[0].name.length-4)&&".pdf"!=document.getElementById("notesupload").files[0].name.substring(document.getElementById("notesupload").files[0].name.length-4)?document.getElementById("errorcodeupload").innerHTML="Please select a different file. Only .pdf, .doc and .docx files are accepted.":(Ui(document.getElementById("notesupload").files[0],document.getElementById("upsubject").value,document.getElementById("uplevel").value,Ai.displayName,Ai.uid),Ki()):document.getElementById("errorcodeupload").innerHTML="Please select the level.":document.getElementById("errorcodeupload").innerHTML="Please select the subject.":document.getElementById("errorcodeupload").innerHTML="Please select a file.":"home"==e.target.id?(Vi(),Qi()):"upload"==e.target.id?es():"logout"==e.target.id?(function(e){return _(e).signOut()}(Oi).then((()=>{isloggedin=!1})).catch((e=>{})),Gi()):"usernotes"==e.target.id?ts():"profpg"==e.target.id||"profpg"==e.target.parentElement.id?rs():"changepw"==e.target.id?Xi("changepassword"):"aboutpg"==e.target.id?ns():"dmtoggle"==e.target.id?ss?ls():cs():e.target.classList.contains("note")||e.target.classList.contains("notechild")?e.target.classList.contains("document")||e.target.parentElement.classList.contains("document")?e.target.classList.contains("document")?e.target.innerHTML+=`<iframe class="showingnotes" src="${Hi[parseInt(e.target.id)].url}"></iframe>`:e.target.parentElement.innerHTML+=`<iframe class="showingnotes" src="${Hi[parseInt(e.target.parentElement.id)].url}"></iframe>`:e.target.classList.contains("note")?e.target.classList.contains("ondisplay")?"m"==zi?(e.target.classList.remove("ondisplay"),e.target.children[3].style.display="none"):"mn"==zi&&(e.target.classList.remove("ondisplay"),e.target.children[4].style.display="none"):"m"==zi?(e.target.classList.add("ondisplay"),e.target.children[3].style.display="block"):"mn"==zi&&(e.target.classList.add("ondisplay"),e.target.children[4].style.display="block"):e.target.parentElement.classList.contains("ondisplay")?"m"==zi?(e.target.parentElement.classList.remove("ondisplay"),e.target.parentElement.children[3].style.display="none"):"mn"==zi&&(e.target.parentElement.classList.remove("ondisplay"),e.target.parentElement.children[4].style.display="none"):"m"==zi?(e.target.parentElement.classList.add("ondisplay"),e.target.parentElement.children[3].style.display="block"):"mn"==zi&&(e.target.parentElement.classList.add("ondisplay"),e.target.parentElement.children[4].style.display="block"):e.target.classList.contains("deletenote")&&(Fi(e.target.parentElement.id,e.target.parentElement),Ji())})),document.addEventListener("keypress",(e=>{"Enter"==e.key&&"a"==zi&&(document.querySelector("#authpage .sidediv").children[0].classList.contains("highlight")?(Pi(document.getElementsByClassName("email")[0].value,document.getElementsByClassName("password")[0].value),qi()):(Mi(document.getElementsByClassName("email")[0].value,document.getElementsByClassName("password")[0].value),qi()))}));const qi=()=>{!1===isloggedin?window.setTimeout(qi,100):!0===isloggedin&&(Vi(),Qi(),Vi(),Qi())},Ki=()=>{!1===xi?window.setTimeout(Ki,100):!0===xi&&(Vi(),Qi())},Gi=()=>{!0===isloggedin?window.setTimeout(Gi,100):!1===isloggedin&&Zi()},Ji=()=>{0==$i?window.setTimeout(Ji,100):1==$i&&document.getElementById("usernotelist").removeChild(ji)},Xi=e=>{document.getElementById("popupbg").style.display="block","passwordreset"==e&&(document.getElementById("popup").innerHTML='<a id="close">&times;</a><h1>Send Password Reset Link</h1><input type="text" placeholder="Email" class="email"><input type="submit" class="submit" value="Submit" id="pwrt">',us()),"changepassword"==e&&(document.getElementById("popup").innerHTML='<a id="close">&times;</a><h1>Change Password</h1><input type="password" class="password" id="pw1" placeholder="New Password"><input type="password" class="password" id="pw2" placeholder="Re-Enter New Password"><p id="errorcodecpw"></p><input type="submit" class="submit" value="Submit" id="cpw">',us(),document.getElementById("errorcodecpw").style.color="#ff7a19")},Yi=()=>{document.getElementById("popupbg").style.display="none"},Zi=()=>{document.getElementById("authpage").style.display="block",document.getElementById("mynotespage").style.display="none",document.getElementById("uploadpage").style.display="none",document.getElementById("mainpage").style.display="none",document.getElementById("hnavbar").style.display="none",document.getElementById("aboutpage").style.display="none",document.getElementById("sidebarcontainer").style.width="0",document.getElementById("sidebar").style.width="0",document.getElementById("sidebar").style.padding="0",document.getElementById("profilepage").style.display="none",zi="a",is(),us()},Qi=()=>{if(document.getElementById("authpage").style.display="none",document.getElementById("mynotespage").style.display="none",document.getElementById("uploadpage").style.display="none",document.getElementById("mainpage").style.display="block",document.getElementById("aboutpage").style.display="none",document.getElementById("hnavbar").style.display="block",Array.from(document.getElementsByClassName("username")).forEach((e=>{e.innerText=Ai.displayName})),Array.from(document.getElementsByClassName("userphoto")).forEach((e=>{e.setAttribute("src",Ai.photoURL)})),document.getElementById("noteslist").innerHTML="",document.getElementById("recentslist").innerHTML="",document.getElementById("profilepage").style.display="none",Hi.forEach(((e,t)=>{".pdf"==e.metas.customMetadata.filename.substring(e.metas.customMetadata.filename.length-4)?document.getElementById("noteslist").innerHTML+=`<div class="note" id="${t}"><h2 class="notechild">${e.metas.customMetadata.filename}</h2><p><a onclick="keyword('${e.metas.customMetadata.level}')">${e.metas.customMetadata.level}</a>, <a onclick="keyword('${e.metas.customMetadata.subject}')">${e.metas.customMetadata.subject}</a></p><p class="right"><a onclick="keyword('${e.metas.customMetadata.userName}')">By ${e.metas.customMetadata.userName}</a></p><iframe class="showingnotes" src="${e.url}"></iframe></div>`:document.getElementById("noteslist").innerHTML+=`<div class="note document" id="${t}"><h2 class="notechild">${e.metas.customMetadata.filename}</h2><p><a onclick="keyword('${e.metas.customMetadata.level}')">${e.metas.customMetadata.level}</a>, <a onclick="keyword('${e.metas.customMetadata.subject}')">${e.metas.customMetadata.subject}</a></p><p class="right"><a onclick="keyword('${e.metas.customMetadata.userName}')">By ${e.metas.customMetadata.userName}</a></p></div>`})),Hi.length<=10){let e;for(let t=Hi.length-1;t>=0;t--)e=Hi[t],".pdf"==e.metas.customMetadata.filename.substring(e.metas.customMetadata.filename.length-4)?document.getElementById("recentslist").innerHTML+=`<div class="note" id="${t}"><h2 class="notechild">${e.metas.customMetadata.filename}</h2><p><a onclick="keyword('${e.metas.customMetadata.level}')">${e.metas.customMetadata.level}</a>, <a onclick="keyword('${e.metas.customMetadata.subject}')">${e.metas.customMetadata.subject}</a></p><p class="right"><a onclick="keyword('${e.metas.customMetadata.userName}')">By ${e.metas.customMetadata.userName}</a></p><iframe class="showingnotes" src="${e.url}"></iframe></div>`:document.getElementById("recentslist").innerHTML+=`<div class="note document" id="${t}"><h2 class="notechild">${e.metas.customMetadata.filename}</h2><p><a onclick="keyword('${e.metas.customMetadata.level}')">${e.metas.customMetadata.level}</a>, <a onclick="keyword('${e.metas.customMetadata.subject}')">${e.metas.customMetadata.subject}</a></p><p class="right"><a onclick="keyword('${e.metas.customMetadata.userName}')">By ${e.metas.customMetadata.userName}</a></p></div>`}else for(let e=Hi.length-1;e>=Hi.length-11;e--)v=Hi[e],".pdf"==v.metas.customMetadata.filename.substring(v.metas.customMetadata.filename.length-4)?document.getElementById("recentslist").innerHTML+=`<div class="note" id="${e}"><h2 class="notechild">${v.metas.customMetadata.filename}</h2><p><a onclick="keyword('${v.metas.customMetadata.level}')">${v.metas.customMetadata.level}</a>, <a onclick="keyword('${v.metas.customMetadata.subject}')">${v.metas.customMetadata.subject}</a></p><p class="right"><a onclick="keyword('${v.metas.customMetadata.userName}')">By ${v.metas.customMetadata.userName}</a></p><iframe class="showingnotes" src="${v.url}"></iframe></div>`:document.getElementById("recentslist").innerHTML+=`<div class="note document" id="${e}"><h2 class="notechild">${v.metas.customMetadata.filename}</h2><p><a onclick="keyword('${v.metas.customMetadata.level}')">${v.metas.customMetadata.level}</a>, <a onclick="keyword('${v.metas.customMetadata.subject}')">${v.metas.customMetadata.subject}</a></p><p class="right"><a onclick="keyword('${v.metas.customMetadata.userName}')">By ${v.metas.customMetadata.userName}</a></p></div>`;zi="m",us(),is()},es=()=>{document.getElementById("authpage").style.display="none",document.getElementById("mynotespage").style.display="none",document.getElementById("uploadpage").style.display="block",document.getElementById("mainpage").style.display="none",document.getElementById("aboutpage").style.display="none",document.getElementById("hnavbar").style.display="block",document.getElementById("profilepage").style.display="none",zi="u",us()},ts=()=>{document.getElementById("sidebarcontainer").style.width="0",document.getElementById("sidebar").style.width="0",document.getElementById("sidebar").style.padding="0",document.getElementById("authpage").style.display="none",document.getElementById("mynotespage").style.display="block",document.getElementById("uploadpage").style.display="none",document.getElementById("mainpage").style.display="none",document.getElementById("aboutpage").style.display="none",document.getElementById("hnavbar").style.display="block",document.getElementById("profilepage").style.display="none",zi="mn",document.getElementById("usernotelist").innerHTML="",Hi.forEach(((e,t)=>{e.metas.customMetadata.userID==Ai.uid&&(".pdf"==e.metas.customMetadata.filename.substring(e.metas.customMetadata.filename.length-4)?document.getElementById("usernotelist").innerHTML+=`<div class="note" id="${t}"><h2 class="notechild">${e.metas.customMetadata.filename}</h2><img class="deletenote" src="Images/trash.webp"><p>${e.metas.customMetadata.level}, ${e.metas.customMetadata.subject}</p><p class="right">By ${e.metas.customMetadata.userName}</p><iframe class="showingnotes" src="${e.url}"></iframe></div>`:document.getElementById("usernotelist").innerHTML+=`<div class="note document" id="${t}"><h2 class="notechild">${e.metas.customMetadata.filename}</h2><img class="deletenote" src="Images/trash.webp"><p>${e.metas.customMetadata.level}, ${e.metas.customMetadata.subject}</p><p class="right">By ${e.metas.customMetadata.userName}</p></div>`)})),""==document.getElementById("usernotelist").innerHTML&&(document.getElementById("usernotelist").innerHTML+="<p>None yet. Start uploading!</p>"),us()},ns=()=>{document.getElementById("sidebarcontainer").style.width="0",document.getElementById("sidebar").style.width="0",document.getElementById("sidebar").style.padding="0",document.getElementById("authpage").style.display="none",document.getElementById("mynotespage").style.display="none",document.getElementById("uploadpage").style.display="none",document.getElementById("mainpage").style.display="none",document.getElementById("aboutpage").style.display="block",document.getElementById("hnavbar").style.display="block",document.getElementById("profilepage").style.display="none",zi="abt",us()},rs=()=>{document.getElementById("sidebarcontainer").style.width="0",document.getElementById("sidebar").style.width="0",document.getElementById("sidebar").style.padding="0",document.getElementById("authpage").style.display="none",document.getElementById("mynotespage").style.display="none",document.getElementById("uploadpage").style.display="none",document.getElementById("mainpage").style.display="none",document.getElementById("aboutpage").style.display="block",document.getElementById("hnavbar").style.display="block",document.getElementById("profilepage").style.display="block",document.getElementById("changepw").style.display=0==Ni?"none":"block";let e=0;Hi.forEach((t=>{t.metas.customMetadata.userID==Ai.uid&&(e+=1)})),document.getElementsByClassName("number")[0].innerHTML=e,us()};Hi=[],Qt(tn(Bi,"notes")).then((e=>{e.items.forEach((e=>{if("notes/undefined"!=e._location.path_){let t={ref:e,metas:"",url:""},n=tn(Bi,e._location.path_);Zt(n).then((e=>{t.metas=e})).catch((e=>{console.log("meta error")})),en(n).then((e=>{t.url=e})).catch((e=>{console.log(e.code)})),Hi.push(t)}}))})).catch((e=>{console.log(e)}));const is=()=>{window.innerWidth<750?("a"==zi?(document.getElementsByClassName("sidediv")[0].style.width="100%",document.getElementsByClassName("sidediv")[0].style.minWidth="0",document.getElementById("mlogo").style.display="block"):"m"==zi&&(document.getElementById("searchbar").style.maxWidth="100%",document.getElementById("searchbar").style.float="none"),document.getElementById("popup").style.width="80%",Wi=!0):("a"==zi?(document.getElementsByClassName("sidediv")[0].style.width="40%",document.getElementsByClassName("sidediv")[0].style.minWidth="400px",document.getElementById("mlogo").style.display="none"):"m"==zi&&(document.getElementById("searchbar").style.maxWidth="200px",document.getElementById("searchbar").style.float="right"),document.getElementById("popup").style.width="50%",Wi=!1)};let ss=null;const os=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,as=window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,cs=()=>{document.getElementsByClassName("sidediv")[0].style.background="#333",document.getElementById("mainpage").style.background="#333",document.getElementById("aboutpage").style.background="#333",document.getElementById("uploadpage").style.background="#333",document.getElementById("profilepage").style.background="#333",document.getElementById("mynotespage").style.background="#333",document.getElementById("popup").style.background="#333",Array.from(document.getElementsByTagName("input")).forEach((e=>{e.style.color="white",e.style.borderColor="white"})),Array.from(document.getElementsByTagName("select")).forEach((e=>{e.style.color="white",e.style.borderColor="white"})),Array.from(document.getElementsByTagName("label")).forEach((e=>{e.style.color="white",e.style.borderColor="white"})),Array.from(document.getElementsByTagName("a")).forEach((e=>{"sidebar"!=e.parentElement.id&&(e.style.color="white")})),Array.from(document.getElementsByTagName("p")).forEach((e=>{e.style.color="white"})),Array.from(document.getElementsByTagName("h1")).forEach((e=>{e.style.color="white"})),Array.from(document.getElementsByTagName("h2")).forEach((e=>{e.style.color="white"})),Array.from(document.getElementsByClassName("note")).forEach((e=>{e.style.borderColor="white"})),Array.from(document.getElementsByClassName("deletenote")).forEach((e=>{e.setAttribute("src","Images/trashwhite.webp")})),Array.from(document.getElementsByTagName("option")).forEach((e=>{e.style.color="black"})),Array.from(document.getElementsByClassName("profbutton")).forEach((e=>{e.style.borderColor="white"})),document.getElementById("errorcodeauth").style.color="#ff7a19",document.getElementById("errorcodeupload").style.color="#ff7a19",document.getElementById("dmtoggle").setAttribute("src","Images/moon.webp"),document.getElementById("mlogo").setAttribute("src","Images/logo_white.webp"),ss=!0},ls=()=>{document.getElementsByClassName("sidediv")[0].style.background="white",document.getElementById("mainpage").style.background="#fff",document.getElementById("aboutpage").style.background="#fff",document.getElementById("uploadpage").style.background="#fff",document.getElementById("profilepage").style.background="#fff",document.getElementById("mynotespage").style.background="#fff",document.getElementById("popup").style.background="#fff",Array.from(document.getElementsByTagName("input")).forEach((e=>{e.style.color="black",e.style.borderColor="#02293e"})),Array.from(document.getElementsByTagName("select")).forEach((e=>{e.style.color="black",e.style.borderColor="#02293e"})),Array.from(document.getElementsByTagName("label")).forEach((e=>{e.style.color="black",e.style.borderColor="#02293e"})),Array.from(document.getElementsByTagName("a")).forEach((e=>{"sidebar"!=e.parentElement.id&&(e.style.color="black"),e.classList.contains("highlight")&&(e.style.color="white")})),Array.from(document.getElementsByTagName("p")).forEach((e=>{e.style.color="black",e.classList.contains("username")&&(e.style.color="white")})),Array.from(document.getElementsByTagName("h1")).forEach((e=>{e.style.color="black"})),Array.from(document.getElementsByTagName("h2")).forEach((e=>{e.style.color="black"})),Array.from(document.getElementsByClassName("note")).forEach((e=>{e.style.borderColor="#02293e"})),Array.from(document.getElementsByClassName("deletenote")).forEach((e=>{e.setAttribute("src","Images/trash.webp")})),Array.from(document.getElementsByTagName("option")).forEach((e=>{e.style.color="black"})),Array.from(document.getElementsByClassName("profbutton")).forEach((e=>{e.style.borderColor="#02293e"})),document.getElementById("hamburger").style.color="white",document.getElementById("errorcodeauth").style.color="#ff7a19",document.getElementById("errorcodeupload").style.color="#ff7a19",document.getElementById("dmtoggle").setAttribute("src","Images/sun.webp"),document.getElementById("mlogo").setAttribute("src","Images/logo.webp"),ss=!1},us=()=>{1==ss?cs():0==ss?ls():(os&&cs(),as&&ls())};window.addEventListener("change",is),window.addEventListener("resize",is),is(),us()})()})();